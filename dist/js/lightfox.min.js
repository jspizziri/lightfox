function LightBox(a){var b,c,d=500,e=this;this.box="",this.content="Loading...",this.background='<div id="lb-bkg"></div>',this.isAnimating=!1,this.openAnimation=null,this.closeAnimation=null,this.lbID="lb"+LightBox.id,LightBox.id++,this.buildBox=function(){var a=this.background;a+='<div class="lb-float" id="'+this.lbID+'">',a+='<div id="lb-wrapper">',a+='<div id="lb-wrapper-inner" class="center">',a+='<div id="lb-frame">',a+='<div id="lb-close"><div>',a+="close",a+="</div></div>",a+='<div id="lb-content">'+this.content+"</div>",a+="</div></div></div></div>",this.box=a},a&&($(a.bindTo).on(a.bindOn,function(a){return a.preventDefault&&a.preventDefault(),e.willAppear(),!1}),a.url?$.ajax({type:"GET",url:a.url,data:a.data,success:function(b){e.content=b;var c=$("#"+e.lbID+" #lb-content");0!==c.length&&c.html(e.content),a.onLoad&&"function"==typeof a.onLoad&&a.onLoad()},error:function(a,b){console&&console.log(b)},dataType:"html"}):void 0===a.url&&void 0===a.content?(this.content=$(a.contentID).html(),$(a.contentID).remove()):void 0!==a.content&&(this.content=a.content)),this.getId=function(){return"div#"+this.lbID},this.initLightbox=function(){this.buildBox(),$("body").css("overflow","hidden"),e.appendLightbox(),b=$("div#lb-bkg"),c=$(e.getId()),$(document).on("click","div#lb-close div",function(){e.willDisappear()}),e.animateLightbox(!0)},this.appendLightbox=function(){0===$(e.getId()).length&&$(this.box).hide().appendTo("body")},this.updateContent=function(a){this.content=a,void 0===$(e.getId())&&$(e.getId()+" #lb-content").html(this.content)},this.exitLightbox=function(){$(document).unbind("div#lb-close div"),c.remove(),$("body").css("overflow","")},this.animateLightbox=function(c){isAnimating=!0;var l;switch(c?(l=e.openAnimation?e.openAnimation:a.effect,b.fadeIn(d)):(l=e.closeAnimation?e.closeAnimation:a.effect,b.fadeOut(d,function(){b.remove()})),l){case LightBox.options.animation.slide.top:f(c);break;case LightBox.options.animation.slide.bottom:g(c);break;case LightBox.options.animation.slide.left:h(c);break;case LightBox.options.animation.slide.right:i(c);break;case LightBox.options.animation.grow:j(c);break;case LightBox.options.animation.standard:k(c);break;default:k(c)}};var f=function(a){a?(c.css({top:"-100%"}).show(),c.animate({top:"0"},d,"swing",function(){e.didAppear()})):c.animate({top:"-100%"},d,"swing",function(){e.didDisappear()})},g=function(a){a?(c.css({top:"200%"}).show(),c.animate({top:"0"},d,"swing",function(){e.didAppear()})):c.animate({top:"200%"},d,"swing",function(){e.didDisappear()})},h=function(a){a?(c.css({left:"-100%"}).show(),c.animate({left:"0"},d,"swing",function(){e.didAppear()})):c.animate({left:"-100%"},d,"swing",function(){e.didDisappear()})},i=function(a){a?(c.css({right:"200%"}).show(),c.animate({right:"0"},d,"swing",function(){e.didAppear()})):c.animate({right:"200%"},d,"swing",function(){e.didDisappear()})},j=function(a){k(a)},k=function(a){a?c.fadeIn(d,function(){e.didAppear()}):($(e.getId()).fadeOut(d,function(){$(e.getId()).remove(),e.didDisappear()}),$("div#lb-bkg").fadeOut(d,function(){$("div#lb-bkg").remove()}))}}function Reader(a){LightBox.call(this,a),this.background='<div id="lb-bkg" class="dark"></div>',this.buildBox=function(){var a=this.background;a+='<div class="lb-float reader" id="'+this.lbID+'">',a+='<div id="lb-wrapper">',a+='<div id="lb-wrapper-inner" class="center">',a+='<div id="lb-frame">',a+='<div id="lb-close"><div>',a+="close",a+="</div></div>",a+='<div id="lb-content">'+this.content+"</div>",a+="</div></div></div></div>",this.box=a}}LightBox.prototype.willAppear=function(){this.isAnimating=!0,this.initLightbox();var a=this;$("#lb-wrapper").on("click",function(b){"lb-wrapper-inner"===b.target.id&&a.willDisappear()})},LightBox.prototype.didAppear=function(){this.isAnimating=!1,$.placeholder&&"function"==typeof $.placeholder.shim&&$.placeholder.shim()},LightBox.prototype.willDisappear=function(){this.isAnimating=!0,$("#lb-wrapper").off(),this.animateLightbox(!1)},LightBox.prototype.didDisappear=function(){this.exitLightbox(),this.isAnimating=!1},LightBox.options={animation:{standard:100,slide:{top:101,bottom:102,left:103,right:104},grow:105},close:{standard:200}},LightBox.id=0,Reader.prototype=new LightBox,Reader.prototype.constructor=Reader,Reader.prototype.parent=LightBox.prototype;